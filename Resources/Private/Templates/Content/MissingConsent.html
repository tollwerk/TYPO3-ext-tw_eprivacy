<f:comment><!--

    Content needs consent message.

    Show all required cookies.
    Show link to accept the required cookies and another link open to the cookie plugin page.

    @param array  data            Content element data
    @param array  consentItems    Subject identifiers of required cookies for this content

--></f:comment>
<html xmlns:f="https://xsd.helhum.io/ns/typo3/cms-fluid/master/ViewHelpers"
      xmlns:eprivacy="http://typo3.org/ns/Tollwerk/tw_eprivacy/ViewHelpers"
      data-namespace-typo3-fluid="true"><f:spaceless>
    <aside class="CookieNeedsConsent">
        <f:comment><!-- Description text --></f:comment>
        <p class="CookieNeedsConsent__text">
            {f:translate(key: 'content.needsConsent.text', arguments: {0: data.header}, extensionName: 'TwEprivacy')}
        </p>

        <f:comment><!-- List of required subjects --></f:comment>
        <f:if condition="{consentItems}">
            <f:comment><!-- Get full subject records --></f:comment>
            <f:variable name="subjects" value="{eprivacy:findSubjectsByName(names: consentItems)}"/>

            <ul class="CookieNeedsConsent__subjects">
                <f:for each="{subjects.byIdentifier}" as="subject">
                    <li class="CookieNeedsConsent__subject">
                        <strong>{subject.title}: </strong>{subject.purposeShort}
                    </li>
                </f:for>
            </ul>
        </f:if>

        <f:comment><!-- Accept cookies --></f:comment>
        <f:comment><!--
        <f:variable name="acceptUrl"
                    value="{f:uri.action(
                        pageUid: settings.pluginPid,
                        action: 'addConsent',
                        controller: 'Subject',
                        pluginName: 'Eprivacy',
                        extensionName: 'TwEprivacy',
                        section: 'c{data.uid}',
                        arguments: '{pid: data.pid, addIdentifiers: subjects.identifiers}'
                    )}"
        />--></f:comment>

        <f:comment><!-- <f:variable name="pluginPageUrl" value="{f:uri.page(pageUid: settings.pluginPid)}"/>--></f:comment>
        <p class="CookieNeedsConsent__actions">
            <a href="{eprivacy:content.missingConsent.acceptT3Link(
            contentUid: data.uid,
            identifiers: subjects.identifiers
            )}">Ben√∂tigte Cookies akzeptieren und Inhalt anzeigen</a>

            <a href="{eprivacy:content.missingConsent.settingsT3Link()}">Alle Cookie-Einstellungen</a>
        </p>
    </aside>
</f:spaceless></html>
